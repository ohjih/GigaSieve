
---
import Layout from '../../../layouts/Layout.astro';
import { ui, defaultLang } from '../../../i18n/ui';
import { buildLangPath } from '../../../i18n/utils';

export async function getStaticPaths() {
    const recipeSlugs = [
        'logs/nginx-status-codes',
        'logs/cloudflare-ray-id',
        'logs/top-ips',
        'csv/top-values',
        'csv/preview-huge',
        'csv/filter-rows',
        'jsonl/extract-keys',
        'jsonl/error-objects',
        'jsonl/top-values',
    ];
    return Object.keys(ui).flatMap((lang) =>
        recipeSlugs.map((slug) => ({ params: { lang, slug } }))
    );
}

const { lang, slug } = Astro.params;
const langKey = (lang in ui ? lang : defaultLang) as keyof typeof ui;
const slugPath = Array.isArray(slug) ? slug.join('/') : String(slug);

if (lang === defaultLang) {
    return Astro.redirect(`/recipes/${slugPath}`, 301);
}

const labels = {
    en: {
        recipes: 'Recipes',
        openInApp: 'Open in App',
        howItWorks: 'How it works',
        sample: 'Sample Input and Output',
        input: 'Input',
        output: 'Output',
        tip: 'Tip',
        relatedRecipes: 'Related Recipes',
        relatedGuides: 'Related Guides',
    },
    ko: {
        recipes: '레시피',
        openInApp: '앱에서 열기',
        howItWorks: '동작 방식',
        sample: '입력/출력 예시',
        input: '입력',
        output: '출력',
        tip: '팁',
        relatedRecipes: '관련 레시피',
        relatedGuides: '관련 가이드',
    },
    es: {
        recipes: 'Recetas',
        openInApp: 'Abrir en la app',
        howItWorks: 'Cómo funciona',
        sample: 'Entrada y salida de ejemplo',
        input: 'Entrada',
        output: 'Salida',
        tip: 'Consejo',
        relatedRecipes: 'Recetas relacionadas',
        relatedGuides: 'Guías relacionadas',
    },
    ja: {
        recipes: 'レシピ',
        openInApp: 'アプリで開く',
        howItWorks: '仕組み',
        sample: '入力/出力例',
        input: '入力',
        output: '出力',
        tip: 'ヒント',
        relatedRecipes: '関連レシピ',
        relatedGuides: '関連ガイド',
    },
    zh: {
        recipes: '食谱',
        openInApp: '在应用中打开',
        howItWorks: '工作原理',
        sample: '输入/输出示例',
        input: '输入',
        output: '输出',
        tip: '提示',
        relatedRecipes: '相关食谱',
        relatedGuides: '相关指南',
    },
} as const;

const recipes = {
    'logs/nginx-status-codes': {
        en: {
            category: 'Logs',
            title: 'nginx Status Codes TopN',
            description: 'Find 499, 502, 504 errors in nginx access logs instantly.',
            intro: 'Identify which HTTP status codes appear most frequently in your nginx access logs. Perfect for finding 4xx/5xx errors fast.',
            howItWorks: [
                'Drop your access.log file into GigaSieve.',
                'The parser extracts 3-digit status codes from each line.',
                'Top Status Codes panel ranks by frequency.',
                '4xx/5xx codes are highlighted for quick triage.',
            ],
            input: [
                '192.168.1.1 - - "GET /api" 200 1234',
                '192.168.1.2 - - "POST /login" 502 0',
                '192.168.1.3 - - "GET /page" 404 567',
                '192.168.1.1 - - "GET /api" 200 890',
                '192.168.1.4 - - "GET /slow" 499 0',
            ],
            output: [
                '200: 2 (40%)',
                '502: 1 (20%) [warn]',
                '404: 1 (20%) [warn]',
                '499: 1 (20%) [warn]',
            ],
            tip: {
                tone: 'amber',
                body: 'Filter by a specific status (e.g., 502) to inspect the exact failing requests.',
            },
            relatedRecipes: [
                { href: '/recipes/logs/cloudflare-ray-id', title: 'Cloudflare Ray-ID Extract', desc: 'Trace requests by Ray-ID' },
                { href: '/recipes/logs/top-ips', title: 'Top IPs', desc: 'Find most active visitors' },
            ],
            relatedGuides: [
                { href: '/guides/analyze-nginx-access-log', title: 'Analyze nginx Access Log', desc: 'Step-by-step tutorial' },
                { href: '/guides/regex-extract-from-log', title: 'Regex Extract', desc: 'Pull patterns from logs' },
            ],
        },
        ko: {
            category: '로그',
            title: 'nginx 상태코드 TopN',
            description: 'nginx 액세스 로그에서 499/502/504 오류를 빠르게 찾습니다.',
            intro: '로그에 가장 자주 등장하는 상태코드를 빠르게 확인해 4xx/5xx 오류를 즉시 파악하세요.',
            howItWorks: [
                'access.log 파일을 GigaSieve에 드롭합니다.',
                '각 줄에서 3자리 상태코드를 추출합니다.',
                'Top Status Codes 패널에 빈도 순으로 표시됩니다.',
                '4xx/5xx는 경고로 강조됩니다.',
            ],
            input: [
                '192.168.1.1 - - "GET /api" 200 1234',
                '192.168.1.2 - - "POST /login" 502 0',
                '192.168.1.3 - - "GET /page" 404 567',
                '192.168.1.1 - - "GET /api" 200 890',
                '192.168.1.4 - - "GET /slow" 499 0',
            ],
            output: [
                '200: 2 (40%)',
                '502: 1 (20%) [warn]',
                '404: 1 (20%) [warn]',
                '499: 1 (20%) [warn]',
            ],
            tip: {
                tone: 'amber',
                body: '특정 상태코드(예: 502)로 필터하면 오류 요청의 맥락을 바로 볼 수 있습니다.',
            },
            relatedRecipes: [
                { href: '/recipes/logs/cloudflare-ray-id', title: 'Cloudflare Ray-ID 추출', desc: '요청 추적' },
                { href: '/recipes/logs/top-ips', title: '상위 IP', desc: '가장 많이 요청한 IP' },
            ],
            relatedGuides: [
                { href: '/guides/analyze-nginx-access-log', title: 'nginx 로그 분석', desc: '단계별 가이드' },
                { href: '/guides/regex-extract-from-log', title: '정규식 추출', desc: '패턴 추출' },
            ],
        },
        es: {
            category: 'Logs',
            title: 'TopN de códigos nginx',
            description: 'Encuentra errores 499/502/504 en logs de nginx al instante.',
            intro: 'Identifica los códigos HTTP más frecuentes en tus logs de nginx para detectar 4xx/5xx rápidamente.',
            howItWorks: [
                'Arrastra access.log a GigaSieve.',
                'Se extraen los códigos de 3 dígitos.',
                'Se ordenan por frecuencia en el panel de insights.',
                '4xx/5xx se resaltan para revisión rápida.',
            ],
            input: [
                '192.168.1.1 - - "GET /api" 200 1234',
                '192.168.1.2 - - "POST /login" 502 0',
                '192.168.1.3 - - "GET /page" 404 567',
                '192.168.1.1 - - "GET /api" 200 890',
                '192.168.1.4 - - "GET /slow" 499 0',
            ],
            output: [
                '200: 2 (40%)',
                '502: 1 (20%) [warn]',
                '404: 1 (20%) [warn]',
                '499: 1 (20%) [warn]',
            ],
            tip: {
                tone: 'amber',
                body: 'Filtra por un código específico (p. ej., 502) para ver las peticiones fallidas.',
            },
            relatedRecipes: [
                { href: '/recipes/logs/cloudflare-ray-id', title: 'Extraer Ray-ID', desc: 'Trazar solicitudes' },
                { href: '/recipes/logs/top-ips', title: 'Top IPs', desc: 'IPs más activas' },
            ],
            relatedGuides: [
                { href: '/guides/analyze-nginx-access-log', title: 'Analizar nginx', desc: 'Guía paso a paso' },
                { href: '/guides/regex-extract-from-log', title: 'Extracción con regex', desc: 'Patrones en logs' },
            ],
        },
        ja: {
            category: 'ログ',
            title: 'nginx ステータスコード TopN',
            description: 'nginxログから 499/502/504 エラーを即座に検出。',
            intro: 'ログで頻出するHTTPステータスを把握して4xx/5xxを素早く確認します。',
            howItWorks: [
                'access.log を GigaSieve にドロップ。',
                '3桁ステータスコードを抽出。',
                '頻度順に表示。',
                '4xx/5xxは警告表示。',
            ],
            input: [
                '192.168.1.1 - - "GET /api" 200 1234',
                '192.168.1.2 - - "POST /login" 502 0',
                '192.168.1.3 - - "GET /page" 404 567',
                '192.168.1.1 - - "GET /api" 200 890',
                '192.168.1.4 - - "GET /slow" 499 0',
            ],
            output: [
                '200: 2 (40%)',
                '502: 1 (20%) [warn]',
                '404: 1 (20%) [warn]',
                '499: 1 (20%) [warn]',
            ],
            tip: {
                tone: 'amber',
                body: '特定コード(例: 502)でフィルタすると失敗リクエストを確認できます。',
            },
            relatedRecipes: [
                { href: '/recipes/logs/cloudflare-ray-id', title: 'Cloudflare Ray-ID', desc: 'リクエスト追跡' },
                { href: '/recipes/logs/top-ips', title: '上位IP', desc: '最も多いIP' },
            ],
            relatedGuides: [
                { href: '/guides/analyze-nginx-access-log', title: 'nginxログ分析', desc: '手順ガイド' },
                { href: '/guides/regex-extract-from-log', title: '正規表現抽出', desc: 'ログのパターン' },
            ],
        },
        zh: {
            category: '日志',
            title: 'nginx 状态码 TopN',
            description: '快速发现 nginx 日志中的 499/502/504 错误。',
            intro: '统计日志中最常见的 HTTP 状态码，快速定位 4xx/5xx。',
            howItWorks: [
                '将 access.log 拖入 GigaSieve。',
                '解析并提取 3 位状态码。',
                '按频率排序展示。',
                '4xx/5xx 高亮提示。',
            ],
            input: [
                '192.168.1.1 - - "GET /api" 200 1234',
                '192.168.1.2 - - "POST /login" 502 0',
                '192.168.1.3 - - "GET /page" 404 567',
                '192.168.1.1 - - "GET /api" 200 890',
                '192.168.1.4 - - "GET /slow" 499 0',
            ],
            output: [
                '200: 2 (40%)',
                '502: 1 (20%) [warn]',
                '404: 1 (20%) [warn]',
                '499: 1 (20%) [warn]',
            ],
            tip: {
                tone: 'amber',
                body: '用特定状态码（如 502）过滤即可查看问题请求。',
            },
            relatedRecipes: [
                { href: '/recipes/logs/cloudflare-ray-id', title: 'Cloudflare Ray-ID', desc: '请求追踪' },
                { href: '/recipes/logs/top-ips', title: 'Top IP', desc: '最活跃 IP' },
            ],
            relatedGuides: [
                { href: '/guides/analyze-nginx-access-log', title: '分析 nginx 日志', desc: '分步教程' },
                { href: '/guides/regex-extract-from-log', title: '正则提取', desc: '日志模式' },
            ],
        },
    },
    'logs/cloudflare-ray-id': {
        en: {
            category: 'Logs',
            title: 'Cloudflare Ray-ID Extract',
            description: 'Extract and trace Cloudflare Ray-IDs from your logs for debugging.',
            intro: 'Every Cloudflare request has a unique Ray-ID. Use this recipe to extract and search Ray-IDs in your access logs.',
            howItWorks: [
                'Open your access log in GigaSieve.',
                'Filter by "ray-" to find Ray-ID lines.',
                'Copy the Ray-ID and look it up in Cloudflare.',
            ],
            input: [
                '... "GET /" 200 512 ray-7a1b2c3d4e5f-IAD',
                '... "POST /login" 403 20 ray-9f8e7d6c5b4a-NRT',
            ],
            output: [
                'ray-7a1b2c3d4e5f-IAD',
                'ray-9f8e7d6c5b4a-NRT',
            ],
            relatedRecipes: [
                { href: '/recipes/logs/nginx-status-codes', title: 'nginx Status Codes', desc: 'Find error spikes' },
                { href: '/recipes/logs/top-ips', title: 'Top IPs', desc: 'Top visitors' },
            ],
            relatedGuides: [
                { href: '/guides/analyze-nginx-access-log', title: 'Analyze nginx Logs', desc: 'Step-by-step analysis' },
                { href: '/guides/regex-extract-from-log', title: 'Regex Extract', desc: 'Pattern extraction' },
            ],
        },
        ko: {
            category: '로그',
            title: 'Cloudflare Ray-ID 추출',
            description: '로그에서 Cloudflare Ray-ID를 추출해 요청을 추적합니다.',
            intro: 'Cloudflare 요청에는 고유한 Ray-ID가 있습니다. 이 레시피로 로그에서 Ray-ID를 추출하세요.',
            howItWorks: [
                'access log를 GigaSieve에 엽니다.',
                '"ray-"로 필터링합니다.',
                'Ray-ID를 복사해 Cloudflare에서 조회합니다.',
            ],
            input: [
                '... "GET /" 200 512 ray-7a1b2c3d4e5f-IAD',
                '... "POST /login" 403 20 ray-9f8e7d6c5b4a-NRT',
            ],
            output: [
                'ray-7a1b2c3d4e5f-IAD',
                'ray-9f8e7d6c5b4a-NRT',
            ],
            relatedRecipes: [
                { href: '/recipes/logs/nginx-status-codes', title: 'nginx 상태코드', desc: '오류 급증 확인' },
                { href: '/recipes/logs/top-ips', title: '상위 IP', desc: '상위 방문자' },
            ],
            relatedGuides: [
                { href: '/guides/analyze-nginx-access-log', title: 'nginx 로그 분석', desc: '단계별 분석' },
                { href: '/guides/regex-extract-from-log', title: '정규식 추출', desc: '패턴 추출' },
            ],
        },
        es: {
            category: 'Logs',
            title: 'Extraer Ray-ID de Cloudflare',
            description: 'Extrae Ray-ID desde logs para depurar solicitudes.',
            intro: 'Cada solicitud de Cloudflare tiene un Ray-ID único. Extrae y busca esos IDs en tus logs.',
            howItWorks: [
                'Abre el log en GigaSieve.',
                'Filtra por "ray-".',
                'Copia el Ray-ID y búscalo en Cloudflare.',
            ],
            input: [
                '... "GET /" 200 512 ray-7a1b2c3d4e5f-IAD',
                '... "POST /login" 403 20 ray-9f8e7d6c5b4a-NRT',
            ],
            output: [
                'ray-7a1b2c3d4e5f-IAD',
                'ray-9f8e7d6c5b4a-NRT',
            ],
            relatedRecipes: [
                { href: '/recipes/logs/nginx-status-codes', title: 'Códigos nginx', desc: 'Picos de errores' },
                { href: '/recipes/logs/top-ips', title: 'Top IPs', desc: 'Visitantes principales' },
            ],
            relatedGuides: [
                { href: '/guides/analyze-nginx-access-log', title: 'Analizar nginx', desc: 'Guía paso a paso' },
                { href: '/guides/regex-extract-from-log', title: 'Extracción regex', desc: 'Patrones' },
            ],
        },
        ja: {
            category: 'ログ',
            title: 'Cloudflare Ray-ID 抽出',
            description: 'ログから Ray-ID を抽出してリクエストを追跡します。',
            intro: 'Cloudflareのリクエストには固有のRay-IDがあります。ログから抽出して検索しましょう。',
            howItWorks: [
                'ログを GigaSieve に開く。',
                '"ray-" でフィルタ。',
                'Ray-ID をコピーして Cloudflare で調査。',
            ],
            input: [
                '... "GET /" 200 512 ray-7a1b2c3d4e5f-IAD',
                '... "POST /login" 403 20 ray-9f8e7d6c5b4a-NRT',
            ],
            output: [
                'ray-7a1b2c3d4e5f-IAD',
                'ray-9f8e7d6c5b4a-NRT',
            ],
            relatedRecipes: [
                { href: '/recipes/logs/nginx-status-codes', title: 'nginxステータスコード', desc: 'エラー増加' },
                { href: '/recipes/logs/top-ips', title: '上位IP', desc: '上位訪問者' },
            ],
            relatedGuides: [
                { href: '/guides/analyze-nginx-access-log', title: 'nginxログ分析', desc: '手順' },
                { href: '/guides/regex-extract-from-log', title: '正規表現抽出', desc: 'パターン' },
            ],
        },
        zh: {
            category: '日志',
            title: 'Cloudflare Ray-ID 提取',
            description: '从日志中提取 Ray-ID 以排查请求。',
            intro: '每个 Cloudflare 请求都有唯一 Ray-ID。可从日志中提取并追踪。',
            howItWorks: [
                '在 GigaSieve 打开日志。',
                '用 "ray-" 过滤。',
                '复制 Ray-ID 到 Cloudflare 查询。',
            ],
            input: [
                '... "GET /" 200 512 ray-7a1b2c3d4e5f-IAD',
                '... "POST /login" 403 20 ray-9f8e7d6c5b4a-NRT',
            ],
            output: [
                'ray-7a1b2c3d4e5f-IAD',
                'ray-9f8e7d6c5b4a-NRT',
            ],
            relatedRecipes: [
                { href: '/recipes/logs/nginx-status-codes', title: 'nginx 状态码', desc: '错误趋势' },
                { href: '/recipes/logs/top-ips', title: 'Top IP', desc: '访问最多' },
            ],
            relatedGuides: [
                { href: '/guides/analyze-nginx-access-log', title: '分析 nginx 日志', desc: '步骤指南' },
                { href: '/guides/regex-extract-from-log', title: '正则提取', desc: '模式提取' },
            ],
        },
    },
    'logs/top-ips': {
        en: {
            category: 'Logs',
            title: 'Top IPs',
            description: 'Find the most active IP addresses in your server logs.',
            intro: 'Identify IPs generating the most traffic to spot bots, scrapers, or abuse.',
            howItWorks: [
                'Open your access log in GigaSieve.',
                'IPs are extracted with pattern matching.',
                'The most frequent IPs appear in Insights.',
            ],
            input: [
                '203.0.113.10 - - "GET /" 200 1200',
                '203.0.113.11 - - "GET /" 200 1200',
                '203.0.113.10 - - "GET /api" 429 0',
            ],
            output: [
                '203.0.113.10: 2',
                '203.0.113.11: 1',
            ],
            tip: {
                tone: 'amber',
                body: 'Filter by status code (403/429) to find abusive IPs faster.',
            },
            relatedRecipes: [
                { href: '/recipes/logs/nginx-status-codes', title: 'nginx Status Codes', desc: 'Error distribution' },
                { href: '/recipes/logs/cloudflare-ray-id', title: 'Cloudflare Ray-ID', desc: 'Request tracing' },
            ],
            relatedGuides: [
                { href: '/guides/analyze-nginx-access-log', title: 'Analyze nginx Access Log', desc: 'Step-by-step analysis' },
                { href: '/guides/remove-pii-from-logs', title: 'Remove PII', desc: 'Protect sensitive data' },
            ],
        },
        ko: {
            category: '로그',
            title: '상위 IP',
            description: '서버 로그에서 가장 활발한 IP를 찾습니다.',
            intro: '트래픽이 많은 IP를 찾아 봇/스크래퍼/공격 징후를 확인하세요.',
            howItWorks: [
                'access log를 GigaSieve에 엽니다.',
                '패턴 매칭으로 IP를 추출합니다.',
                '가장 빈도 높은 IP가 Insights에 표시됩니다.',
            ],
            input: [
                '203.0.113.10 - - "GET /" 200 1200',
                '203.0.113.11 - - "GET /" 200 1200',
                '203.0.113.10 - - "GET /api" 429 0',
            ],
            output: [
                '203.0.113.10: 2',
                '203.0.113.11: 1',
            ],
            tip: {
                tone: 'amber',
                body: '403/429로 필터하면 악성 트래픽 IP를 더 빨리 찾습니다.',
            },
            relatedRecipes: [
                { href: '/recipes/logs/nginx-status-codes', title: 'nginx 상태코드', desc: '오류 분포' },
                { href: '/recipes/logs/cloudflare-ray-id', title: 'Cloudflare Ray-ID', desc: '요청 추적' },
            ],
            relatedGuides: [
                { href: '/guides/analyze-nginx-access-log', title: 'nginx 로그 분석', desc: '단계별 분석' },
                { href: '/guides/remove-pii-from-logs', title: 'PII 제거', desc: '민감 정보 보호' },
            ],
        },
        es: {
            category: 'Logs',
            title: 'Top IPs',
            description: 'Encuentra las IPs más activas en tus logs.',
            intro: 'Detecta IPs con más tráfico para identificar bots o abuso.',
            howItWorks: [
                'Abre el log en GigaSieve.',
                'Se extraen IPs con patrones.',
                'Las IPs más frecuentes aparecen en Insights.',
            ],
            input: [
                '203.0.113.10 - - "GET /" 200 1200',
                '203.0.113.11 - - "GET /" 200 1200',
                '203.0.113.10 - - "GET /api" 429 0',
            ],
            output: [
                '203.0.113.10: 2',
                '203.0.113.11: 1',
            ],
            tip: {
                tone: 'amber',
                body: 'Filtra por 403/429 para detectar IPs abusivas.',
            },
            relatedRecipes: [
                { href: '/recipes/logs/nginx-status-codes', title: 'Códigos nginx', desc: 'Distribución de errores' },
                { href: '/recipes/logs/cloudflare-ray-id', title: 'Cloudflare Ray-ID', desc: 'Trazado de solicitudes' },
            ],
            relatedGuides: [
                { href: '/guides/analyze-nginx-access-log', title: 'Analizar nginx', desc: 'Guía paso a paso' },
                { href: '/guides/remove-pii-from-logs', title: 'Eliminar PII', desc: 'Proteger datos' },
            ],
        },
        ja: {
            category: 'ログ',
            title: '上位IP',
            description: 'ログ内で最も活発なIPを見つけます。',
            intro: 'アクセスの多いIPを特定してボットや不正を検出します。',
            howItWorks: [
                'ログを GigaSieve で開く。',
                'IPをパターン抽出。',
                '頻出IPがInsightsに表示。',
            ],
            input: [
                '203.0.113.10 - - "GET /" 200 1200',
                '203.0.113.11 - - "GET /" 200 1200',
                '203.0.113.10 - - "GET /api" 429 0',
            ],
            output: [
                '203.0.113.10: 2',
                '203.0.113.11: 1',
            ],
            tip: {
                tone: 'amber',
                body: '403/429で絞り込むと不正IPを見つけやすい。',
            },
            relatedRecipes: [
                { href: '/recipes/logs/nginx-status-codes', title: 'nginxステータスコード', desc: 'エラー分布' },
                { href: '/recipes/logs/cloudflare-ray-id', title: 'Cloudflare Ray-ID', desc: 'リクエスト追跡' },
            ],
            relatedGuides: [
                { href: '/guides/analyze-nginx-access-log', title: 'nginxログ分析', desc: '手順' },
                { href: '/guides/remove-pii-from-logs', title: 'PII削除', desc: '機密保護' },
            ],
        },
        zh: {
            category: '日志',
            title: 'Top IP',
            description: '找出日志中最活跃的 IP。',
            intro: '识别高频访问 IP，发现机器人或异常流量。',
            howItWorks: [
                '在 GigaSieve 打开日志。',
                '通过模式提取 IP。',
                '频率最高的 IP 显示在 Insights。',
            ],
            input: [
                '203.0.113.10 - - "GET /" 200 1200',
                '203.0.113.11 - - "GET /" 200 1200',
                '203.0.113.10 - - "GET /api" 429 0',
            ],
            output: [
                '203.0.113.10: 2',
                '203.0.113.11: 1',
            ],
            tip: {
                tone: 'amber',
                body: '用 403/429 过滤可更快定位异常 IP。',
            },
            relatedRecipes: [
                { href: '/recipes/logs/nginx-status-codes', title: 'nginx 状态码', desc: '错误分布' },
                { href: '/recipes/logs/cloudflare-ray-id', title: 'Cloudflare Ray-ID', desc: '请求追踪' },
            ],
            relatedGuides: [
                { href: '/guides/analyze-nginx-access-log', title: '分析 nginx 日志', desc: '步骤指南' },
                { href: '/guides/remove-pii-from-logs', title: '移除 PII', desc: '保护隐私' },
            ],
        },
    },
    'csv/top-values': {
        en: {
            category: 'CSV',
            title: 'CSV Column Top Values',
            description: 'See the most frequent values per column without Excel.',
            intro: 'Run a quick group-by to find the most common values in a CSV column.',
            howItWorks: [
                'Load the CSV in GigaSieve.',
                'Choose a column in the Insights panel.',
                'Top values and counts appear instantly.',
            ],
            input: [
                'status,ip',
                '200,203.0.113.10',
                '404,203.0.113.11',
                '200,203.0.113.10',
            ],
            output: [
                '200: 2',
                '404: 1',
            ],
            relatedRecipes: [
                { href: '/recipes/csv/filter-rows', title: 'Filter Rows', desc: 'Filter by keyword' },
                { href: '/recipes/csv/preview-huge', title: 'Preview Huge CSV', desc: 'Open large files' },
            ],
            relatedGuides: [
                { href: '/guides/open-1gb-csv-in-browser', title: 'Open 1GB CSV', desc: 'Streaming preview' },
                { href: '/guides/why-csv-is-slow', title: 'Why CSV is Slow', desc: 'Parsing bottlenecks' },
            ],
        },
        ko: {
            category: 'CSV',
            title: 'CSV 컬럼 상위 값',
            description: '엑셀 없이 컬럼별 상위 값을 확인합니다.',
            intro: 'CSV 컬럼의 빈도 높은 값을 간단히 집계하세요.',
            howItWorks: [
                'CSV를 GigaSieve에 로드합니다.',
                'Insights에서 컬럼을 선택합니다.',
                '상위 값과 빈도가 즉시 표시됩니다.',
            ],
            input: [
                'status,ip',
                '200,203.0.113.10',
                '404,203.0.113.11',
                '200,203.0.113.10',
            ],
            output: [
                '200: 2',
                '404: 1',
            ],
            relatedRecipes: [
                { href: '/recipes/csv/filter-rows', title: '행 필터', desc: '키워드 필터' },
                { href: '/recipes/csv/preview-huge', title: '대용량 CSV 미리보기', desc: '큰 파일 열기' },
            ],
            relatedGuides: [
                { href: '/guides/open-1gb-csv-in-browser', title: '1GB CSV 열기', desc: '스트리밍 미리보기' },
                { href: '/guides/why-csv-is-slow', title: 'CSV가 느린 이유', desc: '파싱 병목' },
            ],
        },
        es: {
            category: 'CSV',
            title: 'Valores principales de columna',
            description: 'Ver valores más frecuentes sin Excel.',
            intro: 'Ejecuta un group-by rápido para ver valores comunes por columna.',
            howItWorks: [
                'Carga el CSV en GigaSieve.',
                'Elige una columna en Insights.',
                'Se muestran valores y conteos.',
            ],
            input: [
                'status,ip',
                '200,203.0.113.10',
                '404,203.0.113.11',
                '200,203.0.113.10',
            ],
            output: [
                '200: 2',
                '404: 1',
            ],
            relatedRecipes: [
                { href: '/recipes/csv/filter-rows', title: 'Filtrar filas', desc: 'Filtrar por palabra' },
                { href: '/recipes/csv/preview-huge', title: 'Previsualizar CSV grande', desc: 'Abrir archivos grandes' },
            ],
            relatedGuides: [
                { href: '/guides/open-1gb-csv-in-browser', title: 'Abrir CSV 1GB', desc: 'Preview streaming' },
                { href: '/guides/why-csv-is-slow', title: 'Por qué CSV es lento', desc: 'Bottlenecks' },
            ],
        },
        ja: {
            category: 'CSV',
            title: 'CSV 列トップ値',
            description: 'Excelなしで列の頻出値を確認。',
            intro: 'CSV列の頻出値を簡単に集計できます。',
            howItWorks: [
                'CSVをGigaSieveに読み込む。',
                'Insightsで列を選択。',
                'トップ値と件数を表示。',
            ],
            input: [
                'status,ip',
                '200,203.0.113.10',
                '404,203.0.113.11',
                '200,203.0.113.10',
            ],
            output: [
                '200: 2',
                '404: 1',
            ],
            relatedRecipes: [
                { href: '/recipes/csv/filter-rows', title: '行フィルタ', desc: 'キーワードで絞り込み' },
                { href: '/recipes/csv/preview-huge', title: '巨大CSVプレビュー', desc: '大きいファイルを開く' },
            ],
            relatedGuides: [
                { href: '/guides/open-1gb-csv-in-browser', title: '1GB CSVを開く', desc: 'ストリーミング' },
                { href: '/guides/why-csv-is-slow', title: 'CSVが遅い理由', desc: 'ボトルネック' },
            ],
        },
        zh: {
            category: 'CSV',
            title: 'CSV 列高频值',
            description: '无需 Excel 查看列中的高频值。',
            intro: '快速分组统计 CSV 列的常见值。',
            howItWorks: [
                '在 GigaSieve 中加载 CSV。',
                '在 Insights 选择列。',
                '立即显示高频值及次数。',
            ],
            input: [
                'status,ip',
                '200,203.0.113.10',
                '404,203.0.113.11',
                '200,203.0.113.10',
            ],
            output: [
                '200: 2',
                '404: 1',
            ],
            relatedRecipes: [
                { href: '/recipes/csv/filter-rows', title: '过滤行', desc: '按关键词过滤' },
                { href: '/recipes/csv/preview-huge', title: '预览超大 CSV', desc: '打开大文件' },
            ],
            relatedGuides: [
                { href: '/guides/open-1gb-csv-in-browser', title: '打开 1GB CSV', desc: '流式预览' },
                { href: '/guides/why-csv-is-slow', title: 'CSV 为什么慢', desc: '性能瓶颈' },
            ],
        },
    },
    'csv/preview-huge': {
        en: {
            category: 'CSV',
            title: 'Preview Huge CSV',
            description: 'Open massive CSV files instantly without crashing.',
            intro: 'Preview the first rows and search huge CSVs with streaming.',
            howItWorks: [
                'Drop the CSV into GigaSieve.',
                'Streaming preview shows the first rows immediately.',
                'Filter to narrow down results.',
            ],
            input: [
                'col1,col2,col3',
                'a,b,c',
                'd,e,f',
            ],
            output: [
                'Preview loaded: 10,000 rows',
                'Filter: "error"',
            ],
            relatedRecipes: [
                { href: '/recipes/csv/filter-rows', title: 'Filter Rows', desc: 'Search by keyword' },
                { href: '/recipes/csv/top-values', title: 'Top Values', desc: 'Find frequent values' },
            ],
            relatedGuides: [
                { href: '/guides/open-1gb-csv-in-browser', title: 'Open 1GB CSV', desc: 'Streaming preview' },
                { href: '/guides/why-csv-is-slow', title: 'Why CSV is Slow', desc: 'Performance tips' },
            ],
        },
        ko: {
            category: 'CSV',
            title: '대용량 CSV 미리보기',
            description: '멈춤 없이 대용량 CSV를 즉시 미리봅니다.',
            intro: '스트리밍으로 첫 행을 바로 보고 검색할 수 있습니다.',
            howItWorks: [
                'CSV 파일을 GigaSieve에 드롭합니다.',
                '스트리밍 미리보기로 즉시 확인됩니다.',
                '필터로 결과를 좁힙니다.',
            ],
            input: [
                'col1,col2,col3',
                'a,b,c',
                'd,e,f',
            ],
            output: [
                '미리보기 로드: 10,000 rows',
                '필터: "error"',
            ],
            relatedRecipes: [
                { href: '/recipes/csv/filter-rows', title: '행 필터', desc: '키워드 검색' },
                { href: '/recipes/csv/top-values', title: '상위 값', desc: '빈도 값' },
            ],
            relatedGuides: [
                { href: '/guides/open-1gb-csv-in-browser', title: '1GB CSV 열기', desc: '스트리밍 미리보기' },
                { href: '/guides/why-csv-is-slow', title: 'CSV가 느린 이유', desc: '성능 팁' },
            ],
        },
        es: {
            category: 'CSV',
            title: 'Previsualizar CSV enorme',
            description: 'Abre CSV gigantes sin bloquearse.',
            intro: 'Previsualiza filas iniciales y busca con streaming.',
            howItWorks: [
                'Arrastra el CSV a GigaSieve.',
                'La vista previa aparece al instante.',
                'Filtra para reducir resultados.',
            ],
            input: [
                'col1,col2,col3',
                'a,b,c',
                'd,e,f',
            ],
            output: [
                'Preview cargado: 10,000 filas',
                'Filtro: "error"',
            ],
            relatedRecipes: [
                { href: '/recipes/csv/filter-rows', title: 'Filtrar filas', desc: 'Buscar por palabra' },
                { href: '/recipes/csv/top-values', title: 'Top valores', desc: 'Valores frecuentes' },
            ],
            relatedGuides: [
                { href: '/guides/open-1gb-csv-in-browser', title: 'Abrir CSV 1GB', desc: 'Preview streaming' },
                { href: '/guides/why-csv-is-slow', title: 'Por qué CSV es lento', desc: 'Tips de rendimiento' },
            ],
        },
        ja: {
            category: 'CSV',
            title: '巨大CSVプレビュー',
            description: 'クラッシュなしで巨大CSVを即時プレビュー。',
            intro: 'ストリーミングで最初の行をすぐ確認できます。',
            howItWorks: [
                'CSVをGigaSieveにドロップ。',
                'プレビューが即時に表示。',
                'フィルタで絞り込み。',
            ],
            input: [
                'col1,col2,col3',
                'a,b,c',
                'd,e,f',
            ],
            output: [
                'プレビュー読み込み: 10,000行',
                'フィルタ: "error"',
            ],
            relatedRecipes: [
                { href: '/recipes/csv/filter-rows', title: '行フィルタ', desc: 'キーワード検索' },
                { href: '/recipes/csv/top-values', title: 'トップ値', desc: '頻出値' },
            ],
            relatedGuides: [
                { href: '/guides/open-1gb-csv-in-browser', title: '1GB CSVを開く', desc: 'ストリーミング' },
                { href: '/guides/why-csv-is-slow', title: 'CSVが遅い理由', desc: '性能ヒント' },
            ],
        },
        zh: {
            category: 'CSV',
            title: '预览超大 CSV',
            description: '不崩溃地打开超大 CSV。',
            intro: '通过流式预览快速查看前几行并搜索。',
            howItWorks: [
                '将 CSV 拖入 GigaSieve。',
                '预览立即显示。',
                '用过滤器缩小结果。',
            ],
            input: [
                'col1,col2,col3',
                'a,b,c',
                'd,e,f',
            ],
            output: [
                '预览加载: 10,000 行',
                '过滤: "error"',
            ],
            relatedRecipes: [
                { href: '/recipes/csv/filter-rows', title: '过滤行', desc: '关键词搜索' },
                { href: '/recipes/csv/top-values', title: '高频值', desc: '常见值' },
            ],
            relatedGuides: [
                { href: '/guides/open-1gb-csv-in-browser', title: '打开 1GB CSV', desc: '流式预览' },
                { href: '/guides/why-csv-is-slow', title: 'CSV 为什么慢', desc: '性能提示' },
            ],
        },
    },
    'csv/filter-rows': {
        en: {
            category: 'CSV',
            title: 'Filter Rows',
            description: 'Filter CSV rows by keyword without scripts.',
            intro: 'Use the filter box to find rows that match a keyword or phrase.',
            howItWorks: [
                'Open the CSV in GigaSieve.',
                'Type a keyword in the filter box.',
                'Rows update instantly as you type.',
            ],
            input: [
                'status,message',
                '200,ok',
                '500,server error',
                '404,not found',
            ],
            output: [
                'Filter: "error"',
                '500,server error',
            ],
            relatedRecipes: [
                { href: '/recipes/csv/preview-huge', title: 'Preview Huge CSV', desc: 'Open large files' },
                { href: '/recipes/csv/top-values', title: 'Top Values', desc: 'Frequent values' },
            ],
            relatedGuides: [
                { href: '/guides/open-1gb-csv-in-browser', title: 'Open 1GB CSV', desc: 'Streaming preview' },
                { href: '/guides/regex-extract-from-log', title: 'Regex Extract', desc: 'Pattern search' },
            ],
        },
        ko: {
            category: 'CSV',
            title: '행 필터',
            description: '스크립트 없이 키워드로 CSV 행을 필터링합니다.',
            intro: '필터 박스에 키워드를 입력해 원하는 행만 확인하세요.',
            howItWorks: [
                'CSV를 GigaSieve에 엽니다.',
                '필터 박스에 키워드를 입력합니다.',
                '입력 즉시 결과가 갱신됩니다.',
            ],
            input: [
                'status,message',
                '200,ok',
                '500,server error',
                '404,not found',
            ],
            output: [
                '필터: "error"',
                '500,server error',
            ],
            relatedRecipes: [
                { href: '/recipes/csv/preview-huge', title: '대용량 CSV 미리보기', desc: '큰 파일 열기' },
                { href: '/recipes/csv/top-values', title: '상위 값', desc: '빈도 값' },
            ],
            relatedGuides: [
                { href: '/guides/open-1gb-csv-in-browser', title: '1GB CSV 열기', desc: '스트리밍 미리보기' },
                { href: '/guides/regex-extract-from-log', title: '정규식 추출', desc: '패턴 검색' },
            ],
        },
        es: {
            category: 'CSV',
            title: 'Filtrar filas',
            description: 'Filtra filas por palabra clave sin scripts.',
            intro: 'Usa el cuadro de filtro para encontrar filas que coincidan.',
            howItWorks: [
                'Abre el CSV en GigaSieve.',
                'Escribe un keyword en el filtro.',
                'Las filas se actualizan al instante.',
            ],
            input: [
                'status,message',
                '200,ok',
                '500,server error',
                '404,not found',
            ],
            output: [
                'Filtro: "error"',
                '500,server error',
            ],
            relatedRecipes: [
                { href: '/recipes/csv/preview-huge', title: 'Previsualizar CSV grande', desc: 'Abrir grandes archivos' },
                { href: '/recipes/csv/top-values', title: 'Top valores', desc: 'Valores frecuentes' },
            ],
            relatedGuides: [
                { href: '/guides/open-1gb-csv-in-browser', title: 'Abrir CSV 1GB', desc: 'Preview streaming' },
                { href: '/guides/regex-extract-from-log', title: 'Extracción regex', desc: 'Búsqueda de patrones' },
            ],
        },
        ja: {
            category: 'CSV',
            title: '行フィルタ',
            description: 'スクリプトなしでCSV行をフィルタ。',
            intro: 'フィルタ欄にキーワードを入力して行を絞り込みます。',
            howItWorks: [
                'CSVをGigaSieveで開く。',
                'フィルタにキーワード入力。',
                '結果が即時に更新。',
            ],
            input: [
                'status,message',
                '200,ok',
                '500,server error',
                '404,not found',
            ],
            output: [
                'フィルタ: "error"',
                '500,server error',
            ],
            relatedRecipes: [
                { href: '/recipes/csv/preview-huge', title: '巨大CSVプレビュー', desc: '大きいファイル' },
                { href: '/recipes/csv/top-values', title: 'トップ値', desc: '頻出値' },
            ],
            relatedGuides: [
                { href: '/guides/open-1gb-csv-in-browser', title: '1GB CSVを開く', desc: 'ストリーミング' },
                { href: '/guides/regex-extract-from-log', title: '正規表現抽出', desc: 'パターン検索' },
            ],
        },
        zh: {
            category: 'CSV',
            title: '过滤行',
            description: '无需脚本按关键词过滤 CSV 行。',
            intro: '在过滤框输入关键词即可筛选行。',
            howItWorks: [
                '在 GigaSieve 打开 CSV。',
                '输入关键词进行过滤。',
                '结果实时更新。',
            ],
            input: [
                'status,message',
                '200,ok',
                '500,server error',
                '404,not found',
            ],
            output: [
                '过滤: "error"',
                '500,server error',
            ],
            relatedRecipes: [
                { href: '/recipes/csv/preview-huge', title: '预览超大 CSV', desc: '打开大文件' },
                { href: '/recipes/csv/top-values', title: '高频值', desc: '常见值' },
            ],
            relatedGuides: [
                { href: '/guides/open-1gb-csv-in-browser', title: '打开 1GB CSV', desc: '流式预览' },
                { href: '/guides/regex-extract-from-log', title: '正则提取', desc: '模式搜索' },
            ],
        },
    },
    'jsonl/extract-keys': {
        en: {
            category: 'JSONL',
            title: 'JSONL Extract Keys',
            description: 'List keys found across JSONL records quickly.',
            intro: 'Extract top-level keys from JSONL to understand schema.',
            howItWorks: [
                'Open JSONL in GigaSieve.',
                'The parser scans keys per line.',
                'Top keys and counts appear in Insights.',
            ],
            input: [
                '{"level":"info","msg":"ok"}',
                '{"level":"error","code":500,"msg":"fail"}',
            ],
            output: [
                'level: 2',
                'msg: 2',
                'code: 1',
            ],
            relatedRecipes: [
                { href: '/recipes/jsonl/top-values', title: 'JSONL Top Values', desc: 'Frequent values' },
                { href: '/recipes/jsonl/error-objects', title: 'JSONL Error Objects', desc: 'Only errors' },
            ],
            relatedGuides: [
                { href: '/guides/json-vs-jsonl', title: 'JSON vs JSONL', desc: 'Choose format' },
                { href: '/guides/regex-extract-from-log', title: 'Regex Extract', desc: 'Pattern extraction' },
            ],
        },
        ko: {
            category: 'JSONL',
            title: 'JSONL 키 추출',
            description: 'JSONL에서 자주 등장하는 키를 빠르게 확인합니다.',
            intro: 'JSONL의 스키마를 파악하려면 상위 키 목록을 확인하세요.',
            howItWorks: [
                'JSONL을 GigaSieve에 엽니다.',
                '각 줄의 키를 스캔합니다.',
                '상위 키와 빈도가 Insights에 표시됩니다.',
            ],
            input: [
                '{"level":"info","msg":"ok"}',
                '{"level":"error","code":500,"msg":"fail"}',
            ],
            output: [
                'level: 2',
                'msg: 2',
                'code: 1',
            ],
            relatedRecipes: [
                { href: '/recipes/jsonl/top-values', title: 'JSONL 상위 값', desc: '빈도 값' },
                { href: '/recipes/jsonl/error-objects', title: 'JSONL 오류 객체', desc: '오류만 보기' },
            ],
            relatedGuides: [
                { href: '/guides/json-vs-jsonl', title: 'JSON vs JSONL', desc: '형식 선택' },
                { href: '/guides/regex-extract-from-log', title: '정규식 추출', desc: '패턴 추출' },
            ],
        },
        es: {
            category: 'JSONL',
            title: 'Extraer claves JSONL',
            description: 'Lista claves encontradas en JSONL rápidamente.',
            intro: 'Extrae claves de primer nivel para entender el esquema.',
            howItWorks: [
                'Abre JSONL en GigaSieve.',
                'Se escanean claves por línea.',
                'Se muestran claves y conteos.',
            ],
            input: [
                '{"level":"info","msg":"ok"}',
                '{"level":"error","code":500,"msg":"fail"}',
            ],
            output: [
                'level: 2',
                'msg: 2',
                'code: 1',
            ],
            relatedRecipes: [
                { href: '/recipes/jsonl/top-values', title: 'Top valores JSONL', desc: 'Valores frecuentes' },
                { href: '/recipes/jsonl/error-objects', title: 'Objetos de error JSONL', desc: 'Solo errores' },
            ],
            relatedGuides: [
                { href: '/guides/json-vs-jsonl', title: 'JSON vs JSONL', desc: 'Elegir formato' },
                { href: '/guides/regex-extract-from-log', title: 'Extracción regex', desc: 'Patrones' },
            ],
        },
        ja: {
            category: 'JSONL',
            title: 'JSONLキー抽出',
            description: 'JSONLで出現するキーを一覧化。',
            intro: 'JSONLのスキーマ理解にキー一覧が便利です。',
            howItWorks: [
                'JSONLをGigaSieveで開く。',
                '行ごとにキーをスキャン。',
                'キーと件数が表示。',
            ],
            input: [
                '{"level":"info","msg":"ok"}',
                '{"level":"error","code":500,"msg":"fail"}',
            ],
            output: [
                'level: 2',
                'msg: 2',
                'code: 1',
            ],
            relatedRecipes: [
                { href: '/recipes/jsonl/top-values', title: 'JSONLトップ値', desc: '頻出値' },
                { href: '/recipes/jsonl/error-objects', title: 'JSONLエラー抽出', desc: 'エラーのみ' },
            ],
            relatedGuides: [
                { href: '/guides/json-vs-jsonl', title: 'JSON vs JSONL', desc: '形式選択' },
                { href: '/guides/regex-extract-from-log', title: '正規表現抽出', desc: 'パターン' },
            ],
        },
        zh: {
            category: 'JSONL',
            title: 'JSONL 提取键',
            description: '快速列出 JSONL 中的键。',
            intro: '提取顶层键以理解数据结构。',
            howItWorks: [
                '在 GigaSieve 打开 JSONL。',
                '逐行扫描键。',
                '显示键与出现次数。',
            ],
            input: [
                '{"level":"info","msg":"ok"}',
                '{"level":"error","code":500,"msg":"fail"}',
            ],
            output: [
                'level: 2',
                'msg: 2',
                'code: 1',
            ],
            relatedRecipes: [
                { href: '/recipes/jsonl/top-values', title: 'JSONL 高频值', desc: '常见值' },
                { href: '/recipes/jsonl/error-objects', title: 'JSONL 错误对象', desc: '仅错误' },
            ],
            relatedGuides: [
                { href: '/guides/json-vs-jsonl', title: 'JSON vs JSONL', desc: '格式选择' },
                { href: '/guides/regex-extract-from-log', title: '正则提取', desc: '模式' },
            ],
        },
    },
    'jsonl/error-objects': {
        en: {
            category: 'JSONL',
            title: 'JSONL Error Objects Only',
            description: 'Filter JSONL to keep only error records.',
            intro: 'Keep only lines where level=error or code>=400.',
            howItWorks: [
                'Load JSONL in GigaSieve.',
                'Filter by keyword like "error" or "level":"error".',
                'Only error objects remain.',
            ],
            input: [
                '{"level":"info","msg":"ok"}',
                '{"level":"error","code":500,"msg":"fail"}',
            ],
            output: [
                '{"level":"error","code":500,"msg":"fail"}',
            ],
            relatedRecipes: [
                { href: '/recipes/jsonl/extract-keys', title: 'JSONL Extract Keys', desc: 'Inspect fields' },
                { href: '/recipes/jsonl/top-values', title: 'JSONL Top Values', desc: 'Frequent values' },
            ],
            relatedGuides: [
                { href: '/guides/remove-pii-from-logs', title: 'Remove PII', desc: 'Protect sensitive data' },
                { href: '/guides/json-vs-jsonl', title: 'JSON vs JSONL', desc: 'Format choice' },
            ],
        },
        ko: {
            category: 'JSONL',
            title: 'JSONL 오류 객체만 추출',
            description: '오류 레코드만 남기도록 필터링합니다.',
            intro: 'level=error 또는 code>=400만 남기세요.',
            howItWorks: [
                'JSONL을 GigaSieve에 로드합니다.',
                '"error" 또는 "level":"error"로 필터합니다.',
                '오류 객체만 남습니다.',
            ],
            input: [
                '{"level":"info","msg":"ok"}',
                '{"level":"error","code":500,"msg":"fail"}',
            ],
            output: [
                '{"level":"error","code":500,"msg":"fail"}',
            ],
            relatedRecipes: [
                { href: '/recipes/jsonl/extract-keys', title: 'JSONL 키 추출', desc: '필드 확인' },
                { href: '/recipes/jsonl/top-values', title: 'JSONL 상위 값', desc: '빈도 값' },
            ],
            relatedGuides: [
                { href: '/guides/remove-pii-from-logs', title: 'PII 제거', desc: '민감 정보 보호' },
                { href: '/guides/json-vs-jsonl', title: 'JSON vs JSONL', desc: '형식 선택' },
            ],
        },
        es: {
            category: 'JSONL',
            title: 'Solo objetos de error JSONL',
            description: 'Filtra JSONL para mantener solo errores.',
            intro: 'Conserva líneas con level=error o code>=400.',
            howItWorks: [
                'Carga JSONL en GigaSieve.',
                'Filtra por "error" o "level":"error".',
                'Quedan solo errores.',
            ],
            input: [
                '{"level":"info","msg":"ok"}',
                '{"level":"error","code":500,"msg":"fail"}',
            ],
            output: [
                '{"level":"error","code":500,"msg":"fail"}',
            ],
            relatedRecipes: [
                { href: '/recipes/jsonl/extract-keys', title: 'Extraer claves', desc: 'Inspeccionar campos' },
                { href: '/recipes/jsonl/top-values', title: 'Top valores', desc: 'Valores frecuentes' },
            ],
            relatedGuides: [
                { href: '/guides/remove-pii-from-logs', title: 'Eliminar PII', desc: 'Proteger datos' },
                { href: '/guides/json-vs-jsonl', title: 'JSON vs JSONL', desc: 'Elegir formato' },
            ],
        },
        ja: {
            category: 'JSONL',
            title: 'JSONLエラーのみ抽出',
            description: 'エラー行だけを残すフィルタ。',
            intro: 'level=error または code>=400 のみ残します。',
            howItWorks: [
                'JSONLをGigaSieveで開く。',
                '"error" でフィルタ。',
                'エラー行のみ残る。',
            ],
            input: [
                '{"level":"info","msg":"ok"}',
                '{"level":"error","code":500,"msg":"fail"}',
            ],
            output: [
                '{"level":"error","code":500,"msg":"fail"}',
            ],
            relatedRecipes: [
                { href: '/recipes/jsonl/extract-keys', title: 'JSONLキー抽出', desc: 'フィールド確認' },
                { href: '/recipes/jsonl/top-values', title: 'JSONLトップ値', desc: '頻出値' },
            ],
            relatedGuides: [
                { href: '/guides/remove-pii-from-logs', title: 'PII削除', desc: '機密保護' },
                { href: '/guides/json-vs-jsonl', title: 'JSON vs JSONL', desc: '形式選択' },
            ],
        },
        zh: {
            category: 'JSONL',
            title: 'JSONL 仅错误对象',
            description: '过滤 JSONL 只保留错误记录。',
            intro: '保留 level=error 或 code>=400 的行。',
            howItWorks: [
                '在 GigaSieve 打开 JSONL。',
                '用 "error" 或 "level":"error" 过滤。',
                '仅保留错误对象。',
            ],
            input: [
                '{"level":"info","msg":"ok"}',
                '{"level":"error","code":500,"msg":"fail"}',
            ],
            output: [
                '{"level":"error","code":500,"msg":"fail"}',
            ],
            relatedRecipes: [
                { href: '/recipes/jsonl/extract-keys', title: 'JSONL 提取键', desc: '字段查看' },
                { href: '/recipes/jsonl/top-values', title: 'JSONL 高频值', desc: '常见值' },
            ],
            relatedGuides: [
                { href: '/guides/remove-pii-from-logs', title: '移除 PII', desc: '保护隐私' },
                { href: '/guides/json-vs-jsonl', title: 'JSON vs JSONL', desc: '格式选择' },
            ],
        },
    },
    'jsonl/top-values': {
        en: {
            category: 'JSONL',
            title: 'JSONL Top Values',
            description: 'Find the most frequent values for a given key.',
            intro: 'Pick a key (like status or event) and see the most common values.',
            howItWorks: [
                'Load JSONL in GigaSieve.',
                'Choose a key in Insights.',
                'Top values appear with counts.',
            ],
            input: [
                '{"status":"ok"}',
                '{"status":"error"}',
                '{"status":"ok"}',
            ],
            output: [
                'ok: 2',
                'error: 1',
            ],
            relatedRecipes: [
                { href: '/recipes/jsonl/extract-keys', title: 'JSONL Extract Keys', desc: 'Discover schema' },
                { href: '/recipes/jsonl/error-objects', title: 'JSONL Error Objects', desc: 'Only errors' },
            ],
            relatedGuides: [
                { href: '/guides/json-vs-jsonl', title: 'JSON vs JSONL', desc: 'Format comparison' },
                { href: '/guides/why-csv-is-slow', title: 'Why CSV is Slow', desc: 'Streaming tips' },
            ],
        },
        ko: {
            category: 'JSONL',
            title: 'JSONL 상위 값',
            description: '특정 키의 빈도 높은 값을 찾습니다.',
            intro: 'status 같은 키를 선택하면 상위 값을 확인할 수 있습니다.',
            howItWorks: [
                'JSONL을 로드합니다.',
                'Insights에서 키를 선택합니다.',
                '상위 값과 빈도가 표시됩니다.',
            ],
            input: [
                '{"status":"ok"}',
                '{"status":"error"}',
                '{"status":"ok"}',
            ],
            output: [
                'ok: 2',
                'error: 1',
            ],
            relatedRecipes: [
                { href: '/recipes/jsonl/extract-keys', title: 'JSONL 키 추출', desc: '스키마 확인' },
                { href: '/recipes/jsonl/error-objects', title: 'JSONL 오류 객체', desc: '오류만 보기' },
            ],
            relatedGuides: [
                { href: '/guides/json-vs-jsonl', title: 'JSON vs JSONL', desc: '형식 비교' },
                { href: '/guides/why-csv-is-slow', title: 'CSV가 느린 이유', desc: '스트리밍 팁' },
            ],
        },
        es: {
            category: 'JSONL',
            title: 'Top valores JSONL',
            description: 'Encuentra valores más frecuentes para una clave.',
            intro: 'Elige una clave (status, event) y mira los valores frecuentes.',
            howItWorks: [
                'Carga JSONL en GigaSieve.',
                'Selecciona una clave en Insights.',
                'Se muestran valores y conteos.',
            ],
            input: [
                '{"status":"ok"}',
                '{"status":"error"}',
                '{"status":"ok"}',
            ],
            output: [
                'ok: 2',
                'error: 1',
            ],
            relatedRecipes: [
                { href: '/recipes/jsonl/extract-keys', title: 'Extraer claves', desc: 'Descubrir esquema' },
                { href: '/recipes/jsonl/error-objects', title: 'Errores JSONL', desc: 'Solo errores' },
            ],
            relatedGuides: [
                { href: '/guides/json-vs-jsonl', title: 'JSON vs JSONL', desc: 'Comparación' },
                { href: '/guides/why-csv-is-slow', title: 'Por qué CSV es lento', desc: 'Tips streaming' },
            ],
        },
        ja: {
            category: 'JSONL',
            title: 'JSONLトップ値',
            description: '特定キーの頻出値を確認。',
            intro: 'statusなどのキーを選んで頻出値を表示。',
            howItWorks: [
                'JSONLを読み込む。',
                'Insightsでキーを選択。',
                'トップ値と件数を表示。',
            ],
            input: [
                '{"status":"ok"}',
                '{"status":"error"}',
                '{"status":"ok"}',
            ],
            output: [
                'ok: 2',
                'error: 1',
            ],
            relatedRecipes: [
                { href: '/recipes/jsonl/extract-keys', title: 'JSONLキー抽出', desc: 'スキーマ確認' },
                { href: '/recipes/jsonl/error-objects', title: 'JSONLエラー', desc: 'エラーのみ' },
            ],
            relatedGuides: [
                { href: '/guides/json-vs-jsonl', title: 'JSON vs JSONL', desc: '比較' },
                { href: '/guides/why-csv-is-slow', title: 'CSVが遅い理由', desc: 'ストリーミング' },
            ],
        },
        zh: {
            category: 'JSONL',
            title: 'JSONL 高频值',
            description: '找出某个键的高频值。',
            intro: '选择一个键（如 status）查看最常见的值。',
            howItWorks: [
                '加载 JSONL。',
                '在 Insights 选择键。',
                '显示高频值及次数。',
            ],
            input: [
                '{"status":"ok"}',
                '{"status":"error"}',
                '{"status":"ok"}',
            ],
            output: [
                'ok: 2',
                'error: 1',
            ],
            relatedRecipes: [
                { href: '/recipes/jsonl/extract-keys', title: 'JSONL 提取键', desc: '查看结构' },
                { href: '/recipes/jsonl/error-objects', title: 'JSONL 错误对象', desc: '仅错误' },
            ],
            relatedGuides: [
                { href: '/guides/json-vs-jsonl', title: 'JSON vs JSONL', desc: '格式比较' },
                { href: '/guides/why-csv-is-slow', title: 'CSV 为什么慢', desc: '流式提示' },
            ],
        },
    },
};

const recipe = recipes[slugPath]?.[langKey] ?? recipes[slugPath]?.[defaultLang];
const uiLabels = labels[langKey];

if (!recipe) {
    return Astro.redirect(buildLangPath('/recipes', langKey), 302);
}

const calloutStyles = {
    amber: {
        box: 'bg-amber-500/10 border-amber-500/30',
        title: 'text-amber-400',
    },
} as const;
---

<Layout title={`${recipe.title} - GigaSieve Recipe`} description={recipe.description}>
    <section class="container mx-auto px-4 py-12 max-w-3xl">
        <nav class="text-sm text-slate-500 mb-6">
            <a href={buildLangPath('/recipes', langKey)} class="hover:text-emerald-400">{uiLabels.recipes}</a>
            <span class="mx-2">/</span>
            <span class="text-slate-400">{recipe.title}</span>
        </nav>

        <h1 class="text-3xl font-extrabold text-slate-200 mb-4">{recipe.title}</h1>
        <p class="text-slate-400 mb-8">{recipe.intro}</p>

        <a href={buildLangPath('/app', langKey)} class="inline-flex items-center gap-2 bg-gradient-to-r from-emerald-500 to-cyan-500 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-emerald-500/30 hover:shadow-emerald-500/50 transition-all mb-8">
            {uiLabels.openInApp}
        </a>

        <div class="bg-slate-900 rounded-xl border border-slate-800 p-6 mb-8">
            <h2 class="text-lg font-bold text-slate-300 mb-4">{uiLabels.howItWorks}</h2>
            <ol class="list-decimal list-inside space-y-2 text-slate-400 text-sm">
                {recipe.howItWorks.map((step) => (
                    <li>{step}</li>
                ))}
            </ol>
        </div>

        <div class="bg-slate-900 rounded-xl border border-slate-800 p-6 mb-8">
            <h2 class="text-lg font-bold text-slate-300 mb-4">{uiLabels.sample}</h2>
            <div class="grid md:grid-cols-2 gap-4 text-sm font-mono">
                <div>
                    <p class="text-slate-500 mb-2">{uiLabels.input}</p>
                    <pre class="bg-slate-950 p-3 rounded-lg text-slate-400 overflow-x-auto">{recipe.input.join('\n')}</pre>
                </div>
                <div>
                    <p class="text-slate-500 mb-2">{uiLabels.output}</p>
                    <pre class="bg-slate-950 p-3 rounded-lg text-slate-400 overflow-x-auto">{recipe.output.join('\n')}</pre>
                </div>
            </div>
        </div>

        {recipe.tip && (
            <div class={`border rounded-xl p-6 mb-8 ${calloutStyles[recipe.tip.tone].box}`}>
                <h2 class={`text-lg font-bold mb-2 ${calloutStyles[recipe.tip.tone].title}`}>{uiLabels.tip}</h2>
                <p class="text-slate-400 text-sm">{recipe.tip.body}</p>
            </div>
        )}

        <h2 class="text-xl font-bold text-slate-300 mb-4">{uiLabels.relatedRecipes}</h2>
        <div class="grid md:grid-cols-2 gap-4 mb-8">
            {recipe.relatedRecipes.map((item) => (
                <a href={buildLangPath(item.href, langKey)} class="bg-slate-900 hover:bg-slate-800 rounded-xl p-4 border border-slate-800 transition-all">
                    <h3 class="font-semibold text-slate-300">{item.title}</h3>
                    <p class="text-xs text-slate-600 mt-1">{item.desc}</p>
                </a>
            ))}
        </div>

        <h2 class="text-xl font-bold text-slate-300 mb-4">{uiLabels.relatedGuides}</h2>
        <div class="grid md:grid-cols-2 gap-4">
            {recipe.relatedGuides.map((item) => (
                <a href={buildLangPath(item.href, langKey)} class="bg-slate-900 hover:bg-slate-800 rounded-xl p-4 border border-slate-800 transition-all">
                    <h3 class="font-semibold text-slate-300">{item.title}</h3>
                    <p class="text-xs text-slate-600 mt-1">{item.desc}</p>
                </a>
            ))}
        </div>
    </section>
</Layout>
