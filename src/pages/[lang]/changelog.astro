---
import Layout from '../../layouts/Layout.astro';
import { ui, defaultLang } from '../../i18n/ui';
import { buildLangPath } from '../../i18n/utils';

export async function getStaticPaths() {
    return Object.keys(ui).map((lang) => ({ params: { lang } }));
}

const { lang } = Astro.params;
if (lang === defaultLang) {
    return Astro.redirect('/changelog', 301);
}

const copy = {
    en: {
        title: 'Changelog - GigaSieve',
        h1: 'Changelog',
        desc: 'Product updates, content additions, and policy changes.',
    },
    ko: {
        title: 'Changelog - GigaSieve',
        h1: 'Changelog',
        desc: 'Product updates, content additions, and policy changes.',
    },
    es: {
        title: 'Changelog - GigaSieve',
        h1: 'Changelog',
        desc: 'Product updates, content additions, and policy changes.',
    },
    ja: {
        title: 'Changelog - GigaSieve',
        h1: 'Changelog',
        desc: 'Product updates, content additions, and policy changes.',
    },
    zh: {
        title: 'Changelog - GigaSieve',
        h1: 'Changelog',
        desc: 'Product updates, content additions, and policy changes.',
    },
};

const c = copy[lang as keyof typeof copy] ?? copy.en;
---

<Layout title={c.title} description={c.desc}>
    <section class="container mx-auto px-4 py-12 max-w-3xl">
        <h1 class="text-4xl font-extrabold text-slate-200 mb-4">{c.h1}</h1>
        <p class="text-slate-500 mb-10">{c.desc}</p>

        <div class="space-y-8">
            <div class="bg-slate-900 border border-slate-800 rounded-xl p-6">
                <h2 class="text-lg font-bold text-slate-300">2026-01-30</h2>
                <ul class="list-disc list-inside text-slate-400 text-sm mt-3 space-y-1">
                    <li>Added new log recipes (Top URIs, Slow Requests, Status by Hour).</li>
                    <li>Expanded CSV recipes (Group By, Dedupe, Date Range Filter).</li>
                    <li>Expanded JSONL recipes (Flatten Nested, Filter by Key, Regex Extract).</li>
                    <li>Added new guides for Cloudflare logs, anomaly basics, and JSONL schema.</li>
                </ul>
            </div>

            <div class="bg-slate-900 border border-slate-800 rounded-xl p-6">
                <h2 class="text-lg font-bold text-slate-300">2026-01-29</h2>
                <ul class="list-disc list-inside text-slate-400 text-sm mt-3 space-y-1">
                    <li>Expanded About and Privacy pages to improve transparency.</li>
                    <li>Improved contact guidance and local-only processing explanations.</li>
                </ul>
            </div>

            <div class="bg-slate-900 border border-slate-800 rounded-xl p-6">
                <h2 class="text-lg font-bold text-slate-300">2026-01-27</h2>
                <ul class="list-disc list-inside text-slate-400 text-sm mt-3 space-y-1">
                    <li>Initial release of GigaSieve app, recipes, and guides.</li>
                </ul>
            </div>
        </div>

        <p class="text-slate-600 text-sm text-center mt-10">
            <a href={buildLangPath('/', lang)} class="text-emerald-400 hover:underline">Back to Home</a>
        </p>
    </section>
</Layout>
